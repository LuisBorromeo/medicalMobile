
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title></title>

    <link rel="stylesheet" href="css/jquery.mobile-1.3.1.min.css">
    <!--<link rel="stylesheet" href="themes/blue.min.css" />-->

    <!-- Extra Codiqa features -->
    <link rel="stylesheet" href="css/codiqa.ext.css">
    <link rel="stylesheet" href="css/SketchStyles.css">

    <!-- jQuery and jQuery Mobile -->
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/jquery.mobile-1.3.1.min.js"></script>

    <!-- Extra Codiqa features -->
    <script src="js/codiqa.ext.js"></script>
    <script src="js/LanguageDictionary.js"></script>

    <style>


        .bg {
            background-image: url('img/ios_notification_bg_tile.jpg')!important;
            background-color: transparent!important;
            background-attachment:scroll;
            /*background-size:100% 100%;*/
        }

        .mainMenuButton {
            display: block;
            text-align: center;
            cursor: pointer;
            position: relative;
            margin: .3em 0;
            padding: 0;
            height: 220px;
            line-height: 180px;
        }

        /*
        .ui-btn {
            display: block;
            text-align: center;
            cursor: pointer;
            position: relative;
            margin: .3em 0;
            padding: 0;
            height: 110px;
            line-height: 90px;
        }
        */


        .ui-btn-inner {
            font-size: 24px;
            white-space: nowrap;
            zoom: 1;
        }

        .LanguageSwitchCont {
            margin: .2em 0;
            text-align: center;
            vertical-align: middle;
        }


        .badge {
            background: #BA070F;
            color: #fff;
            padding: 2px 7px;
            position: relative;
            right: 0px;
            top: 0px;
            z-index: 999;
            border-radius: 1em;
            border: 3px solid #fff;
        }

        #txtKeyboard{
            font-size: 42px;
            width: 98%;
            height: 10%;

        }

        /*------------ pain management diagram topics --------------------*/
        .frontAnatomy {
            background-image: url('img/front.png')!important;
            background-color: transparent;
            /*background-attachment:scroll;*/
            height: 600px;
            /*background-size:100% 100%;*/
            background-repeat: no-repeat;
            border-radius: 10px;
        }

        .backAnatomy {
            background-image: url('img/back.png')!important;
            background-color: transparent;
            /*background-attachment:scroll;*/
            height: 600px;
            /*background-size:100% 100%;*/
            background-repeat: no-repeat;
            border-radius: 10px;
        }

        .painSummary {
            background-color: transparent;
            /*background-attachment:scroll;*/
            height: 600px;
            /*background-size:100% 100%;*/
            border-radius: 10px;
            padding:12px;
        }


        .topicLabel {
            font-size: 36px;
            color:#3373a5;
            /* border: 3px solid #000000; */
            text-align: center;

            vertical-align: middle;
            text-align: center;
        }

        .headTopic{
            position: relative;
            right: -30px;
            top: 132px;

            width: 200px;
            height: 200px;

            opacity:0.9;

            border: 3px solid #000000;

            display: table-cell;
            vertical-align: middle;
            text-align: center;
        }

        #PainManagementSummary {
            color: #ff0000;
            margin: 3px;
            height: 600px;
        }


        /*------------------- button style for INeed and Symptoms -------------------*/
        .btnINeed{
            display: inline-block;
            color: #ff0000;
            width: 150px;
            margin: 3px;
            height: 110px;
            line-height: 90px;
        }
        .btnSymptoms{
            display: inline-block;
            color: #ff0000;
            width: 150px;
            margin: 3px;
            height: 110px;
            line-height: 90px;
        }

        .yesNoCont{
            /*
            border: solid;
            border-width: 50px;
            */

        }

        .controlGroupContainer{
            border-radius: 10px;
            margin: .3em 0;
            height: 140px;
        }

        /*---  dialog modal -----*/
        .ui-dialog-contain {
            width: 92.5%;
            max-width: 900px;
            margin: 10% auto 15px auto;
            padding: 0;
            position: relative;
            top: -15px;
        }

        /*------------- anatomy button style -------------*/

        .circle {
            background: #ffffff;
            border: 1em solid #ffffff;
            padding: 2em;
            height: 7em;
            width: 7em;
            border-radius: 7em;
            text-align: center;
            margin: 2em auto 0;
        }

        .circleDashed {
            border: 1em dotted #3373a5;/*#235EA4;*/
            padding: 2em;
            height: 7em;
            width: 7em;
            border-radius: 7em;
            text-align: center;
            margin: 2em auto 0;
        }

        .topicButton {

            -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
            -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
            box-shadow:inset 0px 1px 0px 0px #ffffff;

            background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf));
            background:-moz-linear-gradient(top, #ededed 5%, #dfdfdf 100%);
            background:-webkit-linear-gradient(top, #ededed 5%, #dfdfdf 100%);
            background:-o-linear-gradient(top, #ededed 5%, #dfdfdf 100%);
            background:-ms-linear-gradient(top, #ededed 5%, #dfdfdf 100%);
            background:linear-gradient(to bottom, #ededed 5%, #dfdfdf 100%);
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf',GradientType=0);

            background-color:#ededed;

            -moz-border-radius:6px;
            -webkit-border-radius:6px;
            border-radius:6px;

            border:1px solid #dcdcdc;

            display:inline-block;
            color:#777777;
            font-family:arial;
            font-size:25px;
            font-weight:bold;
            padding:60px 44px;
            text-decoration:none;

            text-shadow:0px 1px 0px #ffffff;

        }
        .topicButton:hover {

            background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed));
            background:-moz-linear-gradient(top, #dfdfdf 5%, #ededed 100%);
            background:-webkit-linear-gradient(top, #dfdfdf 5%, #ededed 100%);
            background:-o-linear-gradient(top, #dfdfdf 5%, #ededed 100%);
            background:-ms-linear-gradient(top, #dfdfdf 5%, #ededed 100%);
            background:linear-gradient(to bottom, #dfdfdf 5%, #ededed 100%);
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed',GradientType=0);

            background-color:#dfdfdf;
        }
        .topicButton:active {
            position:relative;
            top:1px;
        }

        .rotate {
            display:inline-block;
            -webkit-transform: rotate(-90deg);
            -moz-transform: rotate(-90deg);
            -ms-transform: rotate(-90deg);
            -o-transform: rotate(-90deg);
            transform: rotate(-90deg);

            /* also accepts left, right, top, bottom coordinates; not required, but a good idea for styling */
            -webkit-transform-origin: 50% 50%;
            -moz-transform-origin: 50% 50%;
            -ms-transform-origin: 50% 50%;
            -o-transform-origin: 50% 50%;
            transform-origin: 50% 50%;

            /* Should be unset in IE9+ I think. */
            filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
        }



    </style>
</head>
<body>
<!-- Home -->
<div data-role="page" id="page1" data-theme="a" class="bg">
    <div data-role="content">

        <div data-role="fieldcontain">
            <div class="ui-grid-b">
                <div class="ui-block-a">
                    <a class="mainMenuButton" data-role="button" href="#INeedPage" data-transition="slide">
                        <span id="INeed">I Need</span>
                        <span id="bubbleINeed" class='badge'>0</span>
                    </a>
                </div>
                <div class="ui-block-b">
                    <a class="mainMenuButton" data-role="button" href="#PainManagementPageFrontBody" data-transition="slide">
                        <span id="PainManagement">Pain Management</span>
                        <span id="bubblePainManagement" class='badge'>0</span>
                    </a>
                </div>
                <div class="ui-block-c">
                    <a class="mainMenuButton" data-role="button" href="#page1" data-transition="slide">
                        <span id="CallForHelp">Call for Help</span>
                    </a>
                </div>
                <div class="ui-block-a">
                    <a class="mainMenuButton" data-role="button" href="#SymptomsPage" data-transition="slide">
                        <span id="Symptoms">Symptoms</span>
                        <span id="bubbleSymptoms" class='badge'>0</span>
                    </a>
                </div>
                <div id="btnKeyboard" class="ui-block-b">
                    <a id="anchorKeyBoard" class="mainMenuButton" data-role="button" href="#KeyboardPage" data-prefetch data-transition="slide">
                        <span id="Keyboard">Keyboard</span>
                    </a>
                </div>
                <div class="ui-block-c">
                    <a class="mainMenuButton" data-role="button" href="#SketchBoardPage" data-transition="slide">
                        <span id="Sketchboard">Sketch Board</span>
                    </a>
                </div>
            </div>

            <div class="ui-grid-b yesNoCont">
                <div class="ui-block-a">
                    <a class="mainMenuButton" data-role="button" href="#page1" onclick="playaudio('/android_asset/www/audio/button-9.mp3')">
                        <span id="Yes">Yes</span>
                    </a>
                </div>
                <div class="ui-block-b">
                    <a class="mainMenuButton" data-role="button" href="#page1">
                        <span id="No">No</span>
                    </a>
                </div>
                <div class="ui-block-c">
                    <div class="LanguageSwitchCont">
                        <br>
                        <select name="spanishToggle" id="spanishToggle" data-theme="" data-role="slider">
                            <option value="off">
                                English
                            </option>
                            <option value="on">
                                Spanish
                            </option>
                        </select>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

<!-- INeed -->
<div data-role="page" id="INeedPage" data-theme="a" class="bg">
    <div data-role="content">
            <div class="controlGroupContainer">
                <div id="INeedControlGroup" data-role="controlgroup" data-type="horizontal"></div>
            </div>

            <div id="INeedIcons">
                <a href="#" id="icon00" class="btnINeed" data-role="button" data-corners="true" data-inline="true">
                    <img src="icon.png">
                </a>
                <a href="#" id="icon01" class="btnINeed" data-role="button" data-corners="true" data-inline="true">
                    ico 01
                </a>
                <a href="#" id="icon02" class="btnINeed" data-role="button" data-corners="true" data-inline="true">
                    ico 02
                </a>
                <a href="#" id="icon03" class="btnINeed" data-role="button" data-corners="true" data-inline="true">
                    ico 03
                </a>
            </div>
    </div>
</div>

<!-- Symptoms -->
<div data-role="page" id="SymptomsPage" data-theme="a" class="bg">
    <div data-role="content">
            <div class="controlGroupContainer">
                <div id="SymptomsControlGroup" data-role="controlgroup"  data-type="horizontal"></div>
            </div>

            <div id="SymptomsIcons">
                <a href="#" id="icon00" class="btnSymptoms" data-role="button" data-corners="true" data-inline="true">
                    <img src="icon.png">
                </a>
                <a href="#" id="icon01" class="btnSymptoms" data-role="button" data-corners="true" data-inline="true">
                    ico 01
                </a>
                <a href="#" id="icon02" class="btnSymptoms" data-role="button" data-corners="true" data-inline="true">
                    ico 02
                </a>
                <a href="#" id="icon03" class="btnSymptoms" data-role="button" data-corners="true" data-inline="true">
                    ico 03
                </a>
            </div>
    </div>
</div>

<!-- PainManagementFontBody-->
<div data-role="page" id="PainManagementPageFrontBody" data-theme="a" class="bg">

    <div data-role="content" class="bg">
        Pain Management

        <div id="front" class="frontAnatomy">

            <a href="javascript:medical.setSelectedCircle('headCircle', 'FrontBody', 'headTopic')">
                <div id="headCircle" class="headTopic circleDashed">
                    <span class="topicLabel rotate">Head</span>
                </div>
            </a>

        </div>

        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#page1" data-transition="slide" data-theme="" data-icon="">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageFrontBody" data-transition="flip" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">
                        Font Body
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageBackBody" data-transition="flip" data-theme="" data-icon="">
                        Back Body
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageSummary" data-transition="flip" data-theme="" data-icon="">
                        Summary
                    </a>
                </li>
            </ul>
        </div>

    </div>
</div>

<!-- AddTopicDialog -->
<div data-role="dialog" id="addPainTopic" data-theme="a">
    <div data-role="content">
        <form id="addTopicForm">
            <div data-role="fieldcontain">
                <label for="slider1">
                    Pain Level
                </label>
                <input id="slider1" type="range" name="slider" value="0" min="0" max="10"
                       data-highlight="false">
            </div>
            <div data-role="fieldcontain">
                <label for="slider2">
                    Pain Onset
                </label>
                <input id="slider2" type="range" name="slider" value="0" min="0" max="10"
                       data-highlight="false">
            </div>
            <div data-role="fieldcontain">
                <label for="PainType">
                    Pain Type:
                </label>
                <select id="PainType" name="PainType">
                    <option value="Aching">
                        Aching
                    </option>
                    <option value="Burning">
                        Burning
                    </option>
                </select>
            </div>
            <div data-role="fieldcontain">
                <label for="AggravatingFactors">
                    Aggravating Factors:
                </label>
                <select id="AggravatingFactors" name="AggravatingFactors">
                    <option value="Breathing">
                        Breathing
                    </option>
                    <option value="Talking">
                        Talking
                    </option>
                </select>
            </div>
            <div data-role="fieldcontain">
                <label for="AlleviatingFactors">
                    Alleviating Factors:
                </label>
                <select id="AlleviatingFactors" name="AlleviatingFactors">
                    <option value="Cold Therapy">
                        Cold Therapy
                    </option>
                    <option value="Cold Therapy">
                        Heat Therapy
                    </option>
                </select>
            </div>
            <p></p>
            <p></p>
            <a href="javascript:medical.saveTopic(
            medical.SelectedCircle.srcEl,
            medical.SelectedCircle.categoryName,
            medical.SelectedCircle.topicName)" data-role="button">Add Pain</a>
            <a data-role="button" data-rel="back">Cancel</a>
        </form>
    </div>
</div>

<!-- PainManagementBackBody-->
<div data-role="page" id="PainManagementPageBackBody" data-theme="a" class="bg">

    <div data-role="content" class="bg">
        Pain Management

        <div id="front" class="backAnatomy">

        </div>

        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#page1" data-transition="slide" data-theme="" data-icon="">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageFrontBody" data-transition="flip" data-theme="" data-icon="">
                        Font Body
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageBackBody" data-transition="flip" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">
                        Back Body
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageSummary" data-transition="flip" data-theme="" data-icon="">
                        Summary
                    </a>
                </li>
            </ul>
        </div>

    </div>
</div>

<!-- PainManagementSummary-->
<div data-role="page" id="PainManagementPageSummary" data-theme="a" class="bg">

    <div data-role="content" class="bg">
        Pain Management

        <div id="PainManagementSummary">
              summary here
        </div>

        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#page1" data-transition="slide" data-theme="" data-icon="">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageFrontBody" data-transition="flip" data-theme="" data-icon="">
                        Font Body
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageBackBody" data-transition="flip" data-theme="" data-icon="">
                        Back Body
                    </a>
                </li>
                <li>
                    <a href="#PainManagementPageSummary" data-transition="flip" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">
                        Summary
                    </a>
                </li>
            </ul>
        </div>

    </div>
</div>

<!-- Keyboard -->
<div data-role="page" id="KeyboardPage" data-theme="a" class="bg">
    <div data-role="content">
        <div  data-role="fieldcontain">
            <textarea  id="txtKeyboard" placeholder="" rows="5" cols="10"></textarea>
        </div>


        <div class="ui-block-a">
            <a id="btnClearKeyboardText" data-role="button">
                <span id="ClearText">Clear</span>
            </a>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

            <div data-role="navbar" data-iconpos="left">
                <ul>
                    <li>
                        <a href="#page1" data-transition="slide" data-theme="" data-icon="home">

                        </a>
                    </li>
                </ul>
            </div>

        </div>


    </div>
</div>

<!-- Sketch board -->
<div data-role="page" id="SketchBoardPage" data-theme="a" class="bg">
    <div data-role="content">

        <div id="canvasContainer" >
            <canvas id="signature" height="600"/>
        </div>

        <div class="ui-block-a">
            <a id="btnReset" data-role="button">
                <span id="Reset">Reset</span>
            </a>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

            <div data-role="navbar" data-iconpos="left">
                <ul>
                    <li>
                        <a href="#page1" data-transition="slide" data-theme="" data-icon="home">

                        </a>
                    </li>
                </ul>
            </div>

        </div>


    </div>
</div>


<audio id="soundHandle" style="display: none;" />


<script type="text/javascript" src="phonegap.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script src="js/modernizr.custom.34982.js"></script>
<script src="js/signatureCapture.js"></script>
<script src="js/Topic.js"></script>
<script>
    var sigCapture = null;
    //var buttonSound = null;

    var medical = {
        init : function(){
            console.log("init fired");

            //---------------------- Set Topic Categories ------------------
            medical.TopicCategories[0]  = new TopicCategory( "FrontBody", "blah" );
            medical.TopicCategories[0].AddTopic( new Topic("headTopic") );

            medical.TopicCategories[1]  = new TopicCategory( "BackBody", "blah" );
            medical.TopicCategories[1].AddTopic( new Topic("headTopic") );

            //---------------------- Init button count bubbles  ------------
            medical.updateBubbleCount( $("#bubbleINeed"), 0 );
            medical.updateBubbleCount( $("#bubbleSymptoms"), 0 );
            medical.updateBubbleCount( $("#bubblePainManagement"), 0 );


            //---------------------- register events -----------------------
            $( "#spanishToggle" ).bind( "change", function(event, ui) {
                console.log("Spanish " + event.target.value);

                if (event.target.value == "on"){
                    medical.parseLanguage("spanish");
                } else {
                    medical.parseLanguage("english");
                }

            });

            //event : entering the keyboard page
            $( document ).on( "pageshow", "#KeyboardPage", function ( event ) {
                console.log("entering keyboard");

                //medical.clearKeyboardText();
                $("#txtKeyboard").focus();
                //$("#btnClearKeyboardText").trigger("click");
                //$("#txtKeyboard").focus();
                //$("#txtKeyboard").blur();
                //$("#txtKeyboard").blur().delay(3000).trigger("click");
                //$("#btnClearKeyboardText").blur().delay(3000).trigger("touchstart");

            });

            //event : entering the sketch page
            $( document ).on( "pageinit", "#SketchBoardPage", function( event ) {
                /*
                 if (sigCapture == null){
                 sigCapture = new SignatureCapture( "signature" );
                 }
                 */
            });

            //global button handler. Fires for all buttons
            $( document ).on( "click", ".ui-btn", function( event, ui ) {
                console.log("button click");

            });

            //icon buttons with css class btnINeed assigned to them
            $( document ).on( "click", ".btnINeed", function( event, ui ) {
                console.log("I need icon clicked");

                medical.moveToControlGroup(event.currentTarget, $("#INeedControlGroup"), $("#INeedIcons") );

                var bubbleCount = $("#INeedControlGroup > .ui-controlgroup-controls").children().length;
                medical.updateBubbleCount( $("#bubbleINeed"), bubbleCount );
            });

            //icon buttons with css class btnSymptoms assigned to them
            $( document ).on( "click", ".btnSymptoms", function( event, ui ) {
                console.log("Symptoms icon clicked");

                medical.moveToControlGroup(event.currentTarget, $("#SymptomsControlGroup"), $("#SymptomsIcons") );

                var bubbleCount = $("#SymptomsControlGroup > .ui-controlgroup-controls").children().length;
                medical.updateBubbleCount( $("#bubbleSymptoms"), bubbleCount );
            });

            //Specific buttons
            $( document ).on( "click", "#btnReset", function( event, ui ) {
                medical.clearSketch();
            });

            $( document ).on( "click", "#btnClearKeyboardText", function( event, ui ) {
                medical.clearKeyboardText();
            });

        },

        /*------------------ Initialize Properties ------------------*/

        TopicCategories: [],
        SelectedCircle: null,

        /*------------------ Methods ------------------*/

        updateBubbleCount: function( bubbleElement, itemCount ){

            if (itemCount > 0){
                bubbleElement.text(itemCount);

                //show bubble
                bubbleElement.show();

            } else {
                //hide bubble
                bubbleElement.hide();
            }

        },

        moveToControlGroup: function (sourceElement, startElement, destinationElement){

             var srcParentId = $(sourceElement).parent().parent()[0].id;
             var targetElement1Id = $(startElement)[0].id;

             if (srcParentId == targetElement1Id){

                 var cg = destinationElement.find(".ui-controlgroup-controls");

                 if (cg.length > 0) {
                     cg.append(sourceElement);
                     destinationElement.controlgroup( "refresh" );
                 } else {
                     destinationElement.append(sourceElement);
                 }

             } else {

                 var cg = startElement.find(".ui-controlgroup-controls");

                 if (cg.length > 0) {
                     cg.append(sourceElement);
                     startElement.controlgroup( "refresh" );

                 } else {
                     startElement.append(sourceElement);
                 }

             }
         },

        parseLanguage : function( languageName ){
            console.log("parsing language");

            $.each(dictionary, function(i, v) {
                if (v.Language == languageName) {
                    var targetSpan = $("#" + v.Key);
                    targetSpan.text( v.Text );
                }
            });

        },

        clearKeyboardText : function(){
            $("#txtKeyboard").val('').select();
        },

        clearSketch : function(){
            sigCapture.clear();
        },

        setSelectedCircle: function (srcEl, categoryName, topicName){
            console.log('selecting circle');

            $.mobile.changePage('#addPainTopic', 'pop', true, true);

            medical.SelectedCircle = {
                'srcEl': srcEl,
                'categoryName': categoryName,
                'topicName': topicName
            }
        },

        saveTopic : function( srcEl, categoryName, topicName ){

            var sourceElement = $('#'+srcEl)[0];
            var curCat = medical.getCategory(categoryName);

            if (curCat != null){

                var curTopic = medical.getTopic( curCat, topicName);

                if (curTopic != null){
                    curTopic.isActive = true;
                    sourceElement.className = "headTopic circle";

                    var pt = $("#PainType");

                    //Add the meta data
                    curTopic.metaData = {
                        'painLevel': $('#slider1').val(),
                        'painOnset': $('#slider2').val(),
                        'painType': pt.val(),
                        'aggravatingFactors': $("#AggravatingFactors").val(),
                        'alleviatingFactors': $('#AlleviatingFactors').val()
                    };

                    //reset the pain form
                    addTopicForm.reset();

                    //close the dialog
                    //$('#addPainTopic').dialog('close');


                    //write the summary
                    var allPainTopics = medical.formatTopicOutput( curTopic );
                    $('#PainManagementSummary').html( allPainTopics );

                    //go to summary
                    $.mobile.navigate( "#PainManagementPageSummary" );

                }

            }

            //update bubble count on main menu button for pain management
            var allCategoriesCount = medical.allCategoriesCount();
            medical.updateBubbleCount( $("#bubblePainManagement"), allCategoriesCount );
        },

        formatTopicOutput: function( topic ){
            var result = "";
            result += "<p></p>TopicName:" + topic.TopicId;
            result += "<p></p>PainLevel:" + topic.metaData.painLevel;

            return result;
        },

        allCategoriesCount: function(){

            var totalCount = 0;

            $.each(medical.TopicCategories, function(i, v) {
                totalCount += medical.TopicCategories[i].CategoryCount();
            });

            return totalCount;
        },

        getCategory : function( categoryName ){
            var curCat = null;

            $.each(medical.TopicCategories, function(i, v) {
                console.log("recursing cats:" + medical.TopicCategories[i].CategoryName);

                if ( medical.TopicCategories[i].CategoryName == categoryName) {
                    console.log("found cat:" + categoryName);
                    curCat = medical.TopicCategories[i];
                }
            });

            return curCat;
        },

        getTopic : function ( category, topicName ){
            var curTopic = null;

            $.each(category.Topics, function(i, v) {
                console.log("recursing topics:" + category.Topics[i].TopicId);

                if ( category.Topics[i].TopicId == topicName) {
                    console.log("found topic:" + topicName);
                    curTopic = category.Topics[i];
                }
            });

            return curTopic;
        }
    };

    (function( $ ) {

        $(document).ready(function(){
            medical.init();

            //signature
            sigCapture = new SignatureCapture( "signature" );

        });

    })( jQuery );

</script>
<script type="text/javascript">
    app.initialize();
</script>

</body>
</html>


